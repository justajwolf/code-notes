# VS Code > 从 0~1 重新认识 “宇宙第一” IDE

>|||
>|:---|:---|
>|author|justajwolf|
>|timez|  UTC + 08:00|
>|ctime|  2024-06-14 17:55:00|
>|utime|  2024-06-19 14:04:00|

## 总结

## 自由探索：分享几个好用的功能和场景

这里分享几个我觉得特好用的 vscode 功能，平时一直在深度使用中，希望可以对一些有这方面诉求的小伙伴提供一些帮助。这些功能点，对于我们一些个人诉求也好，一些场景也好，都极大的方便了我们写东西，减少不必要的折腾成本。

下面结合我的日常使用感受，具体挨个展开说说。


### **Remote Development** > *远程开发不再折腾*

[文档地址](https://code.visualstudio.com/docs/remote/remote-overview)

---

**我的场景**：

我有一台或多台远程机器（可以是云端设备，也可以是家用电脑），平时基本都围绕这台机器进行活动，对桌面依赖度低，除了命令操作以外，还有一些操作频繁的个人项目和资源，都放在这台机器上。


**我的诉求**：

1. 远程机器将作为一个自己的共享设备，平时的个人私有的资源和数据的物理移动，不再借助外在设备，如：U盘，移动硬盘等，甚至可以部署一些个人小服务。
2. 手上能直接摸到的设备，就纯当一个类显示器的终端设备，它的配置可以不需要很高，能具备访问这台远程机器即可。
3. 平时生活中的电脑环境，和开发环境分离，不再混在一起，说到这主要有以下几个原因：
    - 本地机器配置有限，为安装的一些环境，有时候为了避免麻烦，会开启后台运行，在平时，它会占用一些内存资源，如：docker 跑了一些服务和数据库容器。
        - 一直去加配自己的个人电脑，实属没有啥必要，并且越来越重，从轻薄本到游戏本，耗资耗力，不如考虑隔离拆分。
    - 对 mac 电脑不大喜欢(主要是生态环境)，是一个重度 windows 使用者，windows 平台开发环境一直都存在兼容诟病，在 `wsl` 出来以前，基本上靠第三方虚拟机。
        - 目前实在受不了的问题，就是 win10 以后自带的虚拟机，容易和平时使用的依赖虚拟机的生活软件的自有安装环境冲突，折腾起来麻烦，且没啥意义。
    - 个人电脑的系统重装和更换，就不再拧巴，减少不必要的内耗，不再需要重新配置开发环境，它们之间是组合关系，不再是所属关系。

**我的尝试**：

1. 网络疏通，这里就不过多啰嗦了，目前主要是用的 **异地组网** 的方式，打个广告 **蒲公英路由器(个人版)** 便宜又好用，相比自己折腾内网穿透更实在一点。
    - 关于内网穿透的一些原理和自己的实践折腾，后续专门整理一篇分享出来，想说网络原理的尽头，就是网络设备，花点米，置办起来吧，真会少走弯路。。。
2. 网络通了，之前一直用的 `远程桌面` 这种方式，解决这个问题肯定够了。

    优点：
    - 可以从操作系统层面，直接解决访问问题。
    - 操作远程电脑的灵活度极大，可以为所欲为。

    弊端：
    - windows 自带有 `远程桌面(mstsc)`，也提供了 mac 版本的客户端，所以 window 之间很方便，甚至 mac 和 window 之间也不麻烦，主要是 linux 的远程桌面，折腾起来麻烦。
    - 远程桌面，对带宽以及网络传输速度的要求，还是不低的，它主要是大图像传输，刷新频率一般不高，使用体验不大友好，多表现，卡顿和高延迟。

关于 `远程桌面`，想必除了 windows 自带的远程桌面以外，大家肯定也会用一些第三方的工具，如：TeamViewer，向日葵等优秀工具，基本上槽点一样，有些重，不够轻量化。

---

**vscode 新方案**：

这个新方案，一定程度上，解决了 **远程桌面** 的痛点问题，同样的网络环境，只需要关心具体的数据变更，并且都是由 vscode 它自己的协议和封装完成的，几乎不卡顿，也不存在刷新率低的问题，不需要桌面。

我们先来看一下 vscode 方案的架构图，大致是这样的：

![remote-overview](https://code.visualstudio.com/assets/docs/remote/remote-overview/architecture.png)

通过这个图，我们能了解到，这是一个 C/S 架构。

> 原理：本地客户端充当一个纯显示交互的角色，vscode 会在远程机器上，启动一个 vscode server 来负责调度和执行我们实际的命令。

看到这个图，真的优点难掩心中的喜悦，这简直是完全照着我的诉求来设计的。

> 关于安装 `vscode remote dev` 套件，我们可以在插件商店，搜索 `Remote Development` 关键字，可以分别安装和全部安装。

基于如上的架构和思路，remote 套件，主要提供了4种方式：`wsl`、`ssh`、`tunnel`、`container`，下面分别介绍一下：

1. `wsl`

    这种方式，对于 windows 使用者来说，简直一大福利，完美解决 windows 开发环境问题，无差别体验 linux 环境的开发。

    这里就不过多啰嗦了，之前有专门写过一篇关于 `wsl` 的分享，这里贴一下地址，传送到 [`【Windows Subsystem for Linux (WSL)】`](https://blog.justajwolf.cn/#/os/wsl)

    ---
    优点：
    - 基本上没有啥网络延迟，因为 wsl 是本机的。
    - 可以无差别体验 linux 环境开发体验。
    - 告别依赖库和环境配置，因兼容问题，被折磨的局面。

    弊端：
    - wsl 本身吃资源，所以电脑内存起码 32G 起步吧。
        - 原理类似后面的 container，但是它是一个虚拟机的形式，非容器。
        - 使用上感觉也没啥缺点，就硬凑一条吧。

2. `ssh`

    这种方式，是主要的分享点，也是我平时用的最多的方式。

    基于上面的服务架构，下层 vscode 的数据传输，是通过 ssh tunnel 的方式进行的。

    关于 `ssh` 的登录以及权限认证的配置，这里贴一下我的笔记，见[`【ssh 常见配置】`](https://blog.justajwolf.cn/#/protocols/ssh/config)
    - 我习惯于免密登录，为了安全一点，就禁用了密码登陆，平时基本上使用公私钥免密登录，自己用，避免繁琐的密码输入
    ---
    优点：
    - 因为我们平时登录服务器，基本上都用的是ssh，所以这种方式，就比较方便。

    弊端：
    - 不是所有的设备都会支持 ssh，需要依赖客户端，支持 ssh。

3. `tunnel`

    这种方式，类似于 ssh，是 vscode 后来推出的一种 tunnel 方式，目的不再受限于 ssh。

    关于 `tunnel` 的情况，是这样的：

    - server 端：
        - 由 code cli 自己创建和管理 tunnels。
            - 关于 code cli 安装，传送门[`【standalone install cli】`](https://code.visualstudio.com/docs/remote/tunnels#_alternative-downloads)

    - client 端：
        - 使用集成在 vscode ide 中的 client，也就是插件，进行授权登录即可。
        - 使用 vscode.dev 的 url 形式，在浏览器中访问，下面 `Visual Studio Code for the Web` 会详细展开说。
    ---
    优点：
    - 解决了 ssh 客户端依赖问题
    - 只要有 vscode 的地方，以及只要有浏览器的地方，都可以使用 vscode 这一功能。
        - 极大的提高，客户端的灵活性。

    弊端：
    - 目前账号授权，仅支持 GitHub 和 Microsoft 两种账号授权。
    - 单个 tunnel server，同一时间，仅支持单用户使用。
    - 增加了 server 端的管理和维护成本。
        - 不过这个也还好，自己用。

    FAQ，[详见](https://code.visualstudio.com/docs/remote/tunnels#_common-questions)。

4. `container`

    这种方式，简直逆天，等于说是前三种的方式的超级升级版，因为使用容器化技术，直接站在系统层面，相当于 vscode 支持容器内操作。

    从系统角度来说，container是对标系统的，运行在操作系统上的系统环境。

    从环境角度来说，container是绝对性隔离，我同一套配置，同时创建多个独立的容器环境，彼此隔离。

    从使用角度来说，container是极易管理和迁移维护的，基于容器化技术。
    - 一套container配置，到处都能无缝，随时拉起一个环境，不再受操作系统的限制。

    这里简单，以对比的形式，简单介绍一下这种方式，内容有点多，就不过多啰嗦了，有兴趣了，可以自行去探索，传送门[`【Developing inside a Container】`](https://code.visualstudio.com/docs/devcontainers/containers)。

    ---

    优点：
    - 可以利用容器化的特点，配置出一切满足自己需要的系统环境，将以前一台机器的多种环境配置进一步拆分，有洁癖的人极度受用。
        - 如果你有一个小型的 k8s 集群，或者你的本地/远程机器上，安装了docker，你可以让你的宿主环境格外的干净，不同的开发环境，分别打包到 container 中去，用的时候以实例的形式创建。

    缺点：
    - 对机器的配置有要求，相当消耗资源，配置低的，跑容器吃不消，性能比不上直接在物理机上玩。
        - 如果在本地机器上玩container，基本上和 wsl 类似了，内存起步 32G吧。
        - 如果在远程机器上玩container，自己得话就换个配置高点得机器吧，这玩儿像云服务器了都，吃硬件资源。

### **Visual Studio Code for the Web** > *一个浏览器搞定一切，跨端/设备不再是问题*

### **Multi-root Workspaces** > *借鉴monorepo的思路，单体repo管理项目更加随意*

### **Collaborate with Live Share** > *实时协同，解决问题和开发so easy*

## 第一步：快速了解

对于新手

对于老人

## 第二步：快速上手
